---
// Static landing page for Manuscript
---
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Manuscript - Open Source AI Content Detector. Detect AI-generated text, images, audio & video—100% offline, self-hosted, zero external calls." />
  <meta property="og:title" content="Manuscript - Open Source AI Content Detector" />
  <meta property="og:description" content="Detect AI-generated text, images, audio & video—100% offline, self-hosted, zero external calls." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/landing.css" />
  <title>manuscript.dev - Open Source AI Content Detector</title>
</head>
<body>
  <nav>
    <div class="container nav-content">
      <a href="/" class="logo">
        <div class="logo-icon">M</div>
        Manuscript
      </a>
      <div class="nav-links">
        <a href="#try-it">Try It</a>
        <a href="#benchmark">Benchmarks</a>
        <a href="#features">Features</a>
        <a href="#comparison">Compare</a>
        <a href="/introduction/">Docs</a>
        <a href="https://github.com/vinpatel/manuscript" class="nav-btn">GitHub</a>
      </div>
    </div>
  </nav>

  <section class="hero">
    <div class="container">
      <div class="hero-badge">
        100% Privacy-First - Self-Hosted - Open Source
      </div>

      <h1>
        AI Content Detection<br />
        <span class="gradient-text">Without Compromise</span>
      </h1>

      <p class="hero-subtitle">
        The only open-source detector for text, images, audio, and video that runs entirely on your infrastructure.
        Your data never leaves your network. Ever.
      </p>

      <div class="detection-types">
        <span class="detection-type text">Text</span>
        <span class="detection-type image">Image</span>
        <span class="detection-type audio">Audio</span>
        <span class="detection-type video">Video</span>
      </div>

      <div class="hero-buttons">
        <a href="/quickstart/" class="btn-primary">Get Started</a>
        <a href="https://github.com/vinpatel/manuscript" class="btn-secondary">View on GitHub</a>
      </div>

      <div class="code-snippet">
        <div class="code-header">
          <span class="code-dot red"></span>
          <span class="code-dot yellow"></span>
          <span class="code-dot green"></span>
        </div>
        <div class="code-content">
          <span class="comment"># Clone and build</span><br />
          <span class="keyword">git</span> clone https://github.com/vinpatel/Manuscript<br />
          <span class="keyword">cd</span> Manuscript && <span class="keyword">make</span> build<br /><br />
          <span class="comment"># Start server and detect AI content</span><br />
          <span class="keyword">./manuscript</span> serve &amp;&amp; <span class="keyword">curl</span> -X POST localhost:8080/verify \<br />
          &nbsp;&nbsp;-d '&#123;"text": "Your content here"&#125;'
        </div>
      </div>
    </div>
  </section>

  <section class="playground" id="playground">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Try It Yourself</h2>
        <p class="section-subtitle">Paste any text below to see Manuscript's detection signals in action — runs entirely in your browser</p>
      </div>

      <div class="playground-samples">
        <button class="sample-btn sample-human" data-sample="human">
          <span class="sample-icon">H</span> Try Human Sample
        </button>
        <button class="sample-btn sample-ai" data-sample="ai">
          <span class="sample-icon">A</span> Try AI Sample
        </button>
      </div>

      <div class="playground-layout">
        <div class="playground-input">
          <textarea
            id="playground-text"
            class="playground-textarea"
            placeholder="Paste or type text here to analyze... (50+ words recommended for best results)"
            rows="10"
          ></textarea>
          <div class="playground-actions">
            <span class="word-count" id="word-count">0 words</span>
            <button class="btn-primary playground-btn" id="analyze-btn" disabled>
              Analyze Text
            </button>
          </div>
        </div>

        <div id="results-wrapper">
          <div class="playground-placeholder" id="playground-placeholder">
            Paste some text and click "Analyze Text" to see the detection results here.
          </div>

          <div class="playground-results" id="playground-results">
            <div class="verdict-card" id="verdict-card">
              <div class="verdict-label">Verdict</div>
              <div class="verdict-text" id="verdict-text">--</div>
              <div class="verdict-confidence">
                <span class="confidence-value" id="confidence-value">0%</span>
                <span class="confidence-label">confidence</span>
              </div>
              <div class="confidence-gauge">
                <div class="gauge-track">
                  <div class="gauge-fill" id="gauge-fill"></div>
                  <div class="gauge-marker" id="gauge-marker"></div>
                </div>
                <div class="gauge-labels">
                  <span>Human</span>
                  <span>Uncertain</span>
                  <span>AI Generated</span>
                </div>
              </div>
            </div>

            <div class="signals-card">
              <div class="signals-title">Signal Breakdown</div>
              <div class="signals-list" id="signals-list"></div>
            </div>

            <div class="phrases-card" id="phrases-card" style="display: none;">
              <div class="phrases-title">Detected AI Phrases</div>
              <div class="phrases-list" id="phrases-list"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="stats">
    <div class="container">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">90%</div>
          <div class="stat-label">Text Detection Accuracy</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">4</div>
          <div class="stat-label">Content Types Supported</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">0</div>
          <div class="stat-label">External API Calls</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">8ms</div>
          <div class="stat-label">Average Response Time</div>
        </div>
      </div>
    </div>
  </section>

  <section class="benchmark" id="benchmark">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Benchmark Results</h2>
        <p class="section-subtitle">Comprehensive evaluation across 300+ samples from academic and real-world datasets</p>
      </div>

      <div class="benchmark-table-container">
        <table class="benchmark-table">
          <thead>
            <tr>
              <th>Content Type</th>
              <th>Dataset Size</th>
              <th>Accuracy</th>
              <th>Precision</th>
              <th>Recall</th>
              <th>F1 Score</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span class="detection-type text">Text</span></td>
              <td>100 samples</td>
              <td><span class="metric-good">90.00%</span><div class="accuracy-bar"><div class="accuracy-fill accuracy-90"></div></div></td>
              <td class="metric-good">100.00%</td>
              <td>80.00%</td>
              <td class="metric-good">88.89%</td>
            </tr>
            <tr>
              <td><span class="detection-type image">Image</span></td>
              <td>100 samples</td>
              <td><span class="metric-warning">50.00%</span><div class="accuracy-bar"><div class="accuracy-fill accuracy-50"></div></div></td>
              <td>50.00%</td>
              <td class="metric-good">100.00%</td>
              <td>66.67%</td>
            </tr>
            <tr>
              <td><span class="detection-type audio">Audio</span></td>
              <td>100 samples</td>
              <td><span class="metric-warning">46.00%</span><div class="accuracy-bar"><div class="accuracy-fill accuracy-46"></div></div></td>
              <td>47.92%</td>
              <td class="metric-good">92.00%</td>
              <td>63.01%</td>
            </tr>
            <tr>
              <td><span class="detection-type video">Video</span></td>
              <td>100 samples</td>
              <td><span class="metric-pending">Pending</span></td>
              <td>-</td>
              <td>-</td>
              <td>-</td>
            </tr>
          </tbody>
        </table>
      </div>

      <p class="benchmark-note">
        Benchmarked January 2026 with Manuscript v0.2.0 - <a href="/benchmarks/" class="benchmark-link">View Full Report</a>
      </p>
    </div>
  </section>

  <section class="collage" id="samples">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Sample Detection Gallery</h2>
        <p class="section-subtitle">Real samples from our benchmark datasets. Can you tell which are AI-generated?</p>
      </div>

      <div class="collage-grid">
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_001.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_001.jpg" alt="AI generated sample" loading="lazy" /></div>
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_002.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_002.jpg" alt="AI generated sample" loading="lazy" /></div>
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_003.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_003.jpg" alt="AI generated sample" loading="lazy" /></div>
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_004.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_004.jpg" alt="AI generated sample" loading="lazy" /></div>
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_005.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_005.jpg" alt="AI generated sample" loading="lazy" /></div>
        <div class="collage-item human" data-label="Human"><img src="/samples/human_photo_006.jpg" alt="Human photo sample" loading="lazy" /></div>
        <div class="collage-item ai" data-label="AI Generated"><img src="/samples/ai_gan_face_006.jpg" alt="AI generated sample" loading="lazy" /></div>
      </div>
      <p class="collage-note">Hover to reveal labels. Part of our 300+ sample benchmark dataset.</p>
    </div>
  </section>

  <section class="comparison" id="comparison">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Why Choose Manuscript?</h2>
        <p class="section-subtitle">The only solution that combines multi-modal detection with complete privacy</p>
      </div>

      <div class="comparison-table-container">
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Feature</th>
              <th class="highlight">Manuscript</th>
              <th>GPTZero</th>
              <th>Originality.ai</th>
              <th>Turnitin</th>
              <th>Hive AI</th>
            </tr>
          </thead>
          <tbody>
            <tr><td><strong>Self-Hosted</strong></td><td class="check-yes">Yes</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td></tr>
            <tr><td><strong>Works Offline</strong></td><td class="check-yes">Yes</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td></tr>
            <tr><td><strong>Open Source</strong></td><td class="check-yes">MIT</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td></tr>
            <tr><td><strong>Text Detection</strong></td><td class="check-yes">Yes</td><td class="check-yes">Yes</td><td class="check-yes">Yes</td><td class="check-yes">Yes</td><td class="check-partial">Limited</td></tr>
            <tr><td><strong>Image Detection</strong></td><td class="check-yes">Yes</td><td class="check-no">No</td><td class="check-partial">Add-on</td><td class="check-no">No</td><td class="check-yes">Yes</td></tr>
            <tr><td><strong>Audio Detection</strong></td><td class="check-yes">Yes</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-yes">Yes</td></tr>
            <tr><td><strong>Video Detection</strong></td><td class="check-yes">Yes</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-no">No</td><td class="check-yes">Yes</td></tr>
            <tr><td><strong>API Limits</strong></td><td class="check-yes">Unlimited</td><td class="check-partial">Tiered</td><td class="check-partial">Per-check</td><td class="check-partial">Per-student</td><td class="check-partial">Tiered</td></tr>
            <tr><td><strong>Cost</strong></td><td class="check-yes">Free Forever</td><td class="check-no">$$$</td><td class="check-no">$$$</td><td class="check-no">$$$$</td><td class="check-no">$$$$</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <section class="features" id="features">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Built for Enterprise</h2>
        <p class="section-subtitle">Production-ready features for teams that demand security and compliance</p>
      </div>

      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">S</div>
          <h3 class="feature-title">Complete Privacy</h3>
          <p class="feature-desc">Your data never leaves your infrastructure. Perfect for HIPAA, GDPR, and SOC2 compliance requirements.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">F</div>
          <h3 class="feature-title">Real-Time Detection</h3>
          <p class="feature-desc">Sub-10ms response times. Process thousands of requests per second with minimal resource usage.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">D</div>
          <h3 class="feature-title">Docker Ready</h3>
          <p class="feature-desc">Single command deployment. Production Dockerfile with multi-stage builds, health checks, and security hardening.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">Z</div>
          <h3 class="feature-title">Zero Dependencies</h3>
          <p class="feature-desc">Pure Go implementation with no external libraries. Simple to audit, deploy, and maintain.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">M</div>
          <h3 class="feature-title">Prometheus Metrics</h3>
          <p class="feature-desc">Built-in observability with detailed metrics for monitoring accuracy, latency, and throughput.</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">A</div>
          <h3 class="feature-title">Comprehensive API</h3>
          <p class="feature-desc">RESTful API with batch processing, detailed signal breakdowns, and confidence scoring.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="use-cases">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Who Uses Manuscript?</h2>
        <p class="section-subtitle">Trusted by organizations that cannot compromise on privacy</p>
      </div>

      <div class="use-cases-grid">
        <div class="use-case-card">
          <h3 class="use-case-title">Healthcare</h3>
          <ul class="use-case-list">
            <li>HIPAA-compliant content verification</li>
            <li>Patient data never leaves your network</li>
            <li>Detect AI in clinical documentation</li>
            <li>No third-party data processing</li>
          </ul>
        </div>
        <div class="use-case-card">
          <h3 class="use-case-title">Legal</h3>
          <ul class="use-case-list">
            <li>Protect attorney-client privilege</li>
            <li>Verify deposition authenticity</li>
            <li>Detect deepfake evidence</li>
            <li>Fully auditable detection</li>
          </ul>
        </div>
        <div class="use-case-card">
          <h3 class="use-case-title">Education</h3>
          <ul class="use-case-list">
            <li>Academic integrity at scale</li>
            <li>No per-seat licensing costs</li>
            <li>Protect student privacy</li>
            <li>Integrate with any LMS</li>
          </ul>
        </div>
        <div class="use-case-card">
          <h3 class="use-case-title">Government</h3>
          <ul class="use-case-list">
            <li>Air-gapped network compatible</li>
            <li>Classified environment ready</li>
            <li>Full source code audit</li>
            <li>FedRAMP deployable</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="cta">
    <div class="container">
      <h2 class="cta-title">Ready to Get Started?</h2>
      <p class="cta-subtitle">Deploy Manuscript in under 30 seconds and start detecting AI content with complete privacy.</p>
      <div class="cta-buttons">
        <a href="/quickstart/" class="btn-primary">Read the Docs</a>
        <a href="https://github.com/vinpatel/manuscript" class="btn-secondary">Star on GitHub</a>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="/introduction/">Documentation</a>
        <a href="https://github.com/vinpatel/manuscript">GitHub</a>
        <a href="https://github.com/vinpatel/discussions">Community</a>
        <a href="https://github.com/vinpatel/issues">Issues</a>
      </div>
      <p class="footer-copy">MIT License - 2026 Manuscript Contributors. Built with Astro.</p>
    </div>
  </footer>
<script>
// ==========================================================================
// Manuscript Client-Side Text Analyzer
// Faithful port of internal/service/text_analyzer.go
// ==========================================================================

// --- Helper Functions ---

function normalizeText(text) {
  return text
    .replace(/\u2019/g, "'").replace(/\u2018/g, "'")
    .replace(/\u201c/g, '"').replace(/\u201d/g, '"')
    .replace(/\u2014/g, '-').replace(/\u2013/g, '-');
}

function isNumeric(s) {
  if (s.length === 0) return false;
  for (const ch of s) {
    if (ch < '0' || ch > '9') return false;
  }
  return true;
}

function tokenize(text) {
  text = normalizeText(text);
  const re = /[\p{L}\p{N}]+(?:[-'][\p{L}\p{N}]+)*/gu;
  const tokens = text.match(re) || [];
  return tokens.filter(t => {
    if (isNumeric(t)) return false;
    if (t.length === 1) {
      const lower = t.toLowerCase();
      return lower === 'i' || lower === 'a';
    }
    return true;
  });
}

function splitSentences(text) {
  const parts = text.split(/[.!?]+\s+/);
  return parts.map(p => p.trim()).filter(p => p.length > 0);
}

function countSyllables(word) {
  word = word.toLowerCase();
  if (word.length === 0) return 0;
  const vowels = 'aeiouy';
  let count = 0;
  let prevVowel = false;
  for (let i = 0; i < word.length; i++) {
    const isVowel = vowels.includes(word[i]);
    if (isVowel && !prevVowel) count++;
    prevVowel = isVowel;
    if (i === word.length - 1 && word[i] === 'e' && count > 1) count--;
  }
  return Math.max(1, count);
}

const COMMON_WORDS = new Set([
  'a','an','the','i','you','he','she','it','we','they','me','him','her',
  'us','them','my','your','his','its','our','their','this','that',
  'in','on','at','to','for','of','with','by','from','about','into',
  'through','during','before','after','and','or','but','so','yet',
  'if','when','while','because','although','is','are','was','were','be',
  'been','being','have','has','had','do','does','did','will','would',
  'could','should','may','might','must','can','get','got','make','made',
  'not','no','yes','just','only','also','very','more','most','some',
  'any','all','many','much','other','such','than','then','now','here',
  'there','where','what','which','who','how','why','each','every','both',
  'few','new','old','good','bad','first','last','long','little','own',
  'same','big','high','small','large','next','early','young','important','public',
  'able','man','woman','time','year','people','way','day','thing','world',
  'life','hand','part','place','case','week','work','fact','group','number',
  'night','point','home','water','room','mother','area','money','story','month',
  'lot','right','study','book','eye','job','word','business','issue','side',
  'kind','head','house','service','friend','father','power','hour','game','line',
  'end','member','law','car','city','community','name'
]);

function isCommonWord(word) {
  return COMMON_WORDS.has(word.toLowerCase());
}

// --- Signal Analysis Functions ---

function analyzeSentenceVariance(text) {
  const sentences = splitSentences(text);
  if (sentences.length < 3) return 0.5;
  const lengths = sentences.map(s => tokenize(s).length);
  const mean = lengths.reduce((a, b) => a + b, 0) / lengths.length;
  if (mean === 0) return 0.5;
  const variance = lengths.reduce((sum, l) => sum + (l - mean) ** 2, 0) / lengths.length;
  const cv = Math.sqrt(variance) / mean;
  return 1.0 - Math.min(cv / 0.5, 1.0);
}

function analyzeVocabularyRichness(text) {
  const words = tokenize(text);
  if (words.length < 10) return 0.5;
  const unique = new Set(words.map(w => w.toLowerCase()));
  const ttr = unique.size / words.length;
  let uncommonCount = 0;
  for (const w of unique) {
    if (!isCommonWord(w) && w.length > 3) uncommonCount++;
  }
  const uncommonRatio = uncommonCount / unique.size;
  const ttrScore = 1.0 - Math.min(ttr / 0.6, 1.0);
  return Math.max(0, Math.min(1, ttrScore * 0.6 + (1.0 - uncommonRatio) * 0.4));
}

function analyzeBurstiness(text) {
  const words = tokenize(text);
  if (words.length < 20) return 0.5;
  const wordPositions = {};
  for (let i = 0; i < words.length; i++) {
    const w = words[i].toLowerCase();
    if (w.length > 4 && !isCommonWord(w)) {
      if (!wordPositions[w]) wordPositions[w] = [];
      wordPositions[w].push(i);
    }
  }
  let totalBurstiness = 0;
  let count = 0;
  for (const positions of Object.values(wordPositions)) {
    if (positions.length < 2) continue;
    const gaps = [];
    for (let i = 1; i < positions.length; i++) {
      gaps.push(positions[i] - positions[i - 1]);
    }
    const mean = gaps.reduce((a, b) => a + b, 0) / gaps.length;
    if (mean <= 0) continue;
    const variance = gaps.reduce((sum, g) => sum + (g - mean) ** 2, 0) / gaps.length;
    totalBurstiness += Math.sqrt(variance) / mean;
    count++;
  }
  if (count === 0) return 0.5;
  const avgBurstiness = totalBurstiness / count;
  return 1.0 - Math.min(avgBurstiness / 1.5, 1.0);
}

function analyzePunctuationVariety(text) {
  const punctCounts = {};
  let totalPunct = 0;
  for (const ch of text) {
    if (/\p{P}/u.test(ch)) {
      punctCounts[ch] = (punctCounts[ch] || 0) + 1;
      totalPunct++;
    }
  }
  if (totalPunct < 5) return 0.5;
  const uniquePunct = Object.keys(punctCounts).length;
  const interestingPunct = ['!', '?', ';', ':', '-', '\u2014', '(', ')', '"', "'"];
  let variedPunct = 0;
  for (const p of interestingPunct) {
    if (punctCounts[p]) variedPunct++;
  }
  const varietyScore = uniquePunct / 8.0;
  const interestingScore = variedPunct / 5.0;
  return Math.max(0, Math.min(1, 1.0 - (varietyScore * 0.5 + interestingScore * 0.5)));
}

const AI_PHRASES = [
  // Category 1: Direct AI Self-References
  ["as an ai", 1.0], ["as a language model", 1.0], ["as an artificial intelligence", 1.0],
  ["i'm an ai", 1.0], ["i am an ai", 1.0], ["as a large language model", 1.0],
  ["i'm just an ai", 1.0], ["i'm a language model", 1.0], ["as your ai assistant", 1.0],
  ["i don't have personal experiences", 0.95], ["i don't have feelings", 0.9],
  ["i don't have opinions", 0.9], ["i cannot have personal", 0.9],
  ["i don't have consciousness", 0.95], ["i was trained by", 0.85],
  ["my training data", 0.85], ["my knowledge cutoff", 0.9], ["based on my training", 0.85],
  // Category 2: Inability Statements
  ["i cannot provide", 0.8], ["i'm unable to", 0.7], ["i am unable to", 0.7],
  ["i can't actually", 0.7], ["i cannot actually", 0.7], ["i'm not able to", 0.7],
  ["i don't have access to", 0.7], ["i cannot access", 0.7], ["i cannot browse", 0.8],
  ["i cannot search", 0.75], ["i cannot verify", 0.6], ["i cannot confirm", 0.6],
  // Category 3: Claude-Specific
  ["i'd be happy to", 0.7], ["i'd be glad to", 0.7], ["i should note", 0.7],
  ["i should mention", 0.65], ["i appreciate you", 0.5], ["i appreciate your", 0.5],
  ["that said,", 0.4], ["with that said", 0.4], ["that being said", 0.45],
  ["i want to be", 0.4], ["i aim to", 0.5],
  // Category 4: GPT-Specific
  ["certainly!", 0.6], ["absolutely!", 0.5], ["great question!", 0.7],
  ["excellent question", 0.7], ["that's a great question", 0.7],
  ["happy to help", 0.6], ["glad you asked", 0.6], ["sure thing!", 0.5], ["of course!", 0.4],
  // Category 5: Hedging & Caveats
  ["it's important to note", 0.8], ["it is important to", 0.7],
  ["it's worth noting", 0.7], ["it is worth noting", 0.7],
  ["it should be noted", 0.7], ["it bears mentioning", 0.7],
  ["keep in mind that", 0.6], ["bear in mind that", 0.6],
  ["please note that", 0.5], ["do note that", 0.5],
  ["it's crucial to", 0.6], ["it is crucial to", 0.6],
  ["it's essential to", 0.6], ["it is essential to", 0.6],
  ["it's vital to", 0.55], ["importantly,", 0.5], ["crucially,", 0.5],
  ["notably,", 0.45], ["significantly,", 0.4], ["interestingly,", 0.45],
  // Category 6: Transitions
  ["furthermore", 0.4], ["moreover", 0.4], ["additionally", 0.4],
  ["in addition to this", 0.4], ["in conclusion", 0.5], ["to summarize", 0.5],
  ["in summary", 0.5], ["to conclude", 0.5], ["to sum up", 0.45],
  ["all in all", 0.35], ["on the whole", 0.35], ["by and large", 0.35],
  ["in essence", 0.4], ["essentially,", 0.35], ["fundamentally,", 0.4],
  ["ultimately,", 0.35], ["overall,", 0.3], ["consequently,", 0.35],
  ["accordingly,", 0.35], ["thus,", 0.3], ["hence,", 0.35],
  ["therefore,", 0.3], ["as such,", 0.4], ["that being said,", 0.45],
  ["having said that,", 0.45], ["with that in mind,", 0.45],
  // Category 7: Helpful Closings
  ["i hope this helps", 0.7], ["hope this helps", 0.6],
  ["i hope that helps", 0.7], ["hope that helps", 0.6],
  ["i hope this was helpful", 0.7], ["feel free to", 0.5],
  ["don't hesitate to", 0.5], ["please don't hesitate", 0.5],
  ["let me know if", 0.4], ["let me know if you", 0.45],
  ["if you have any questions", 0.5], ["if you have any further", 0.55],
  ["if you need any clarification", 0.55], ["if there's anything else", 0.5],
  ["is there anything else", 0.5], ["happy to clarify", 0.55],
  ["happy to elaborate", 0.55], ["happy to explain", 0.5],
  // Category 8: Formal/Stilted Vocabulary
  ["utilize", 0.35], ["utilization", 0.35], ["facilitate", 0.35],
  ["facilitation", 0.35], ["leverage", 0.35], ["leveraging", 0.35],
  ["delve into", 0.6], ["delve deeper", 0.55], ["delving into", 0.55],
  ["dive into", 0.4], ["dive deeper", 0.4], ["explore the", 0.3],
  ["unpack this", 0.5], ["unpacking the", 0.5], ["navigate the", 0.4],
  ["navigating the", 0.4], ["embark on", 0.45], ["embarking on", 0.45],
  ["endeavor to", 0.5], ["endeavour to", 0.5], ["commence with", 0.45],
  ["prior to", 0.3], ["subsequent to", 0.4], ["in lieu of", 0.4],
  ["in order to", 0.25], ["pertaining to", 0.4], ["with regard to", 0.35],
  ["with regards to", 0.35], ["in regard to", 0.35], ["vis-\u00e0-vis", 0.45],
  ["myriad of", 0.5], ["a myriad", 0.45], ["plethora of", 0.5],
  ["multifaceted", 0.45], ["nuanced", 0.35], ["holistic", 0.4],
  ["synergy", 0.45], ["synergies", 0.45], ["paradigm", 0.4],
  ["paradigm shift", 0.45], ["cutting-edge", 0.35], ["state-of-the-art", 0.35],
  // Category 9: List Introductions
  ["here are some", 0.5], ["here's a list", 0.5], ["the following", 0.4],
  ["here are a few", 0.5], ["here are the key", 0.5], ["here are the main", 0.5],
  ["let me outline", 0.5], ["let me break down", 0.5], ["let me explain", 0.4],
  ["allow me to", 0.45], ["i'll outline", 0.45], ["i will outline", 0.45],
  ["i'll break down", 0.45], ["consider the following", 0.5],
  ["there are several", 0.35], ["there are a few", 0.35], ["there are multiple", 0.35],
  // Category 10: Acknowledgment Phrases
  ["you raise a good point", 0.6], ["you make a good point", 0.6],
  ["that's a valid point", 0.55], ["that's a fair point", 0.55],
  ["you're absolutely right", 0.55], ["you are absolutely right", 0.55],
  ["you're correct", 0.4], ["you are correct", 0.4],
  ["i understand your", 0.4], ["i see what you", 0.4],
  // Category 11: Safety/Disclaimer Language
  ["i would recommend consulting", 0.7], ["consult with a professional", 0.6],
  ["seek professional advice", 0.6], ["consult a doctor", 0.55],
  ["consult a lawyer", 0.55], ["this is not professional advice", 0.8],
  ["this is not legal advice", 0.8], ["this is not medical advice", 0.8],
  ["this is not financial advice", 0.8], ["please consult", 0.5],
  ["i recommend speaking with", 0.6], ["for safety reasons", 0.5], ["for your safety", 0.45],
  // Category 12: Filler Expressions
  ["in today's world", 0.4], ["in this day and age", 0.45], ["in the modern era", 0.4],
  ["it goes without saying", 0.45], ["needless to say", 0.4],
  ["it is widely known", 0.45], ["as we all know", 0.4], ["as you may know", 0.4],
  ["as you might expect", 0.4], ["as one might expect", 0.45],
  ["it is worth mentioning", 0.5], ["this brings us to", 0.45],
  ["this leads us to", 0.45], ["let's take a look", 0.4], ["let us consider", 0.4],
  ["when it comes to", 0.35],
  // Category 13: Emphasis Patterns
  ["it's really important", 0.4], ["this is really important", 0.4],
  ["particularly important", 0.35], ["especially important", 0.35],
  ["extremely important", 0.4], ["absolutely essential", 0.45],
  ["critically important", 0.45], ["cannot be overstated", 0.5],
  ["can't be overstated", 0.5],
  // Category 14: Comparative/Balanced Language
  ["on the one hand", 0.4], ["on the other hand", 0.35],
  ["while it's true that", 0.45], ["while this is true", 0.45],
  ["although this may be", 0.4], ["despite the fact that", 0.4],
  ["notwithstanding", 0.45], ["nonetheless", 0.35], ["nevertheless", 0.35],
  ["be that as it may", 0.5],
];

function detectAIPhrases(text) {
  const lowerText = text.toLowerCase();
  const detected = [];
  let totalWeight = 0;
  for (const [pattern, weight] of AI_PHRASES) {
    if (lowerText.includes(pattern)) {
      detected.push(pattern);
      totalWeight += weight;
    }
  }
  if (detected.length === 0) return { score: 0, phrases: detected };
  const wordCount = tokenize(text).length;
  const normalizedScore = totalWeight / (wordCount / 100.0);
  return { score: Math.min(normalizedScore, 1.0), phrases: detected };
}

function analyzeWordLengthVariance(text) {
  const words = tokenize(text);
  if (words.length < 10) return 0.5;
  const lengths = words.map(w => w.length);
  const mean = lengths.reduce((a, b) => a + b, 0) / lengths.length;
  if (mean === 0) return 0.5;
  const variance = lengths.reduce((sum, l) => sum + (l - mean) ** 2, 0) / lengths.length;
  const cv = Math.sqrt(variance) / mean;
  return 1.0 - Math.min(cv / 0.6, 1.0);
}

function analyzeContractions(text) {
  const contractions = [
    "i'm", "i'll", "i've", "i'd", "you're", "you'll", "you've", "you'd",
    "he's", "she's", "it's", "we're", "they're",
    "don't", "doesn't", "didn't", "won't", "wouldn't",
    "can't", "couldn't", "shouldn't", "isn't", "aren't",
    "wasn't", "weren't", "haven't", "hasn't", "hadn't",
    "let's", "that's", "there's", "here's", "what's",
    "who's", "how's", "where's", "when's",
  ];
  const lowerText = text.toLowerCase();
  const wordCount = tokenize(text).length;
  if (wordCount < 20) return 0.5;
  let count = 0;
  for (const c of contractions) {
    let idx = -1;
    while ((idx = lowerText.indexOf(c, idx + 1)) !== -1) count++;
  }
  const rate = count / (wordCount / 100.0);
  return 1.0 - Math.min(rate / 3.0, 1.0);
}

function analyzeRepetition(text) {
  const sentences = splitSentences(text);
  if (sentences.length < 3) return 0.5;
  const starts = {};
  for (const s of sentences) {
    const words = tokenize(s);
    if (words.length >= 2) {
      const start = (words[0] + ' ' + words[1]).toLowerCase();
      starts[start] = (starts[start] || 0) + 1;
    }
  }
  let repetitions = 0;
  for (const count of Object.values(starts)) {
    if (count > 1) repetitions += count - 1;
  }
  const repRate = repetitions / sentences.length;
  return Math.min(repRate * 2, 1.0);
}

function calculateFleschKincaidGrade(text) {
  const words = tokenize(text);
  const sentences = splitSentences(text);
  if (words.length === 0 || sentences.length === 0) return 0;
  let totalSyllables = 0;
  for (const word of words) totalSyllables += countSyllables(word);
  const wordsPerSentence = words.length / sentences.length;
  const syllablesPerWord = totalSyllables / words.length;
  const grade = 0.39 * wordsPerSentence + 11.8 * syllablesPerWord - 15.59;
  return Math.max(0, Math.min(18, grade));
}

function analyzeReadabilityVariance(text) {
  const sentences = splitSentences(text);
  if (sentences.length < 4) return 0.5;
  const chunkSize = sentences.length > 10 ? 3 : 2;
  const grades = [];
  for (let i = 0; i < sentences.length; i += chunkSize) {
    const chunk = sentences.slice(i, i + chunkSize).join('. ') + '.';
    const grade = calculateFleschKincaidGrade(chunk);
    if (grade > 0) grades.push(grade);
  }
  if (grades.length < 2) return 0.5;
  const mean = grades.reduce((a, b) => a + b, 0) / grades.length;
  if (mean === 0) return 0.5;
  const variance = grades.reduce((sum, g) => sum + (g - mean) ** 2, 0) / grades.length;
  const cv = Math.sqrt(variance) / mean;
  return 1.0 - Math.min(cv / 0.3, 1.0);
}

function calculateNGramEntropy(ngrams, total) {
  if (total <= 0) return 0;
  let entropy = 0;
  for (const count of Object.values(ngrams)) {
    if (count > 0) {
      const p = count / total;
      entropy -= p * Math.log2(p);
    }
  }
  return entropy;
}

function analyzeNGramUniformity(text) {
  const words = tokenize(text);
  if (words.length < 15) return 0.5;
  const bigrams = {};
  for (let i = 0; i < words.length - 1; i++) {
    const bg = (words[i] + ' ' + words[i + 1]).toLowerCase();
    bigrams[bg] = (bigrams[bg] || 0) + 1;
  }
  const trigrams = {};
  for (let i = 0; i < words.length - 2; i++) {
    const tg = (words[i] + ' ' + words[i + 1] + ' ' + words[i + 2]).toLowerCase();
    trigrams[tg] = (trigrams[tg] || 0) + 1;
  }
  const bigramEntropy = calculateNGramEntropy(bigrams, words.length - 1);
  const trigramEntropy = calculateNGramEntropy(trigrams, words.length - 2);
  const bigramKeys = Object.keys(bigrams).length;
  const trigramKeys = Object.keys(trigrams).length;
  const maxBE = bigramKeys > 0 ? Math.log2(bigramKeys) : 0;
  const maxTE = trigramKeys > 0 ? Math.log2(trigramKeys) : 0;
  const normBE = maxBE > 0 ? bigramEntropy / maxBE : 0;
  const normTE = maxTE > 0 ? trigramEntropy / maxTE : 0;
  let repBigrams = 0;
  for (const c of Object.values(bigrams)) { if (c > 1) repBigrams++; }
  let repTrigrams = 0;
  for (const c of Object.values(trigrams)) { if (c > 1) repTrigrams++; }
  const bigramRepRatio = bigramKeys > 0 ? repBigrams / bigramKeys : 0;
  const trigramRepRatio = trigramKeys > 0 ? repTrigrams / trigramKeys : 0;
  const entropyScore = (normBE + normTE) / 2;
  const repetitionScore = (bigramRepRatio + trigramRepRatio) / 2;
  const aiScore = entropyScore * (1 - repetitionScore * 0.5);
  return Math.max(0, Math.min(1, aiScore));
}

// --- Weighted Score ---

const WEIGHTS = {
  sentenceVariance: 0.10,
  vocabularyRichness: 0.16,
  burstiness: 0.07,
  punctuationVariety: 0.07,
  aiPhraseDetection: 0.20,
  wordLengthVariance: 0.05,
  contractionsUsage: 0.09,
  repetitionPenalty: 0.08,
  readabilityVariance: 0.09,
  ngramUniformity: 0.09,
};

function analyzeText(text) {
  const phraseResult = detectAIPhrases(text);
  const signals = {
    sentenceVariance:   { score: analyzeSentenceVariance(text),   label: 'Sentence Variance' },
    vocabularyRichness: { score: analyzeVocabularyRichness(text), label: 'Vocabulary Richness' },
    burstiness:         { score: analyzeBurstiness(text),         label: 'Burstiness' },
    punctuationVariety: { score: analyzePunctuationVariety(text), label: 'Punctuation Variety' },
    aiPhraseDetection:  { score: phraseResult.score,              label: 'AI Phrases' },
    wordLengthVariance: { score: analyzeWordLengthVariance(text), label: 'Word Length Var.' },
    contractionsUsage:  { score: analyzeContractions(text),       label: 'Contraction Usage' },
    repetitionPenalty:  { score: analyzeRepetition(text),         label: 'Repetition' },
    readabilityVariance:{ score: analyzeReadabilityVariance(text),label: 'Readability Var.' },
    ngramUniformity:    { score: analyzeNGramUniformity(text),    label: 'N-Gram Uniformity' },
  };
  let weightedSum = 0;
  let totalWeight = 0;
  for (const [key, weight] of Object.entries(WEIGHTS)) {
    weightedSum += signals[key].score * weight;
    totalWeight += weight;
  }
  const aiScore = totalWeight > 0 ? Math.max(0, Math.min(1, weightedSum / totalWeight)) : 0.5;
  const human = aiScore < 0.5;
  const confidence = Math.abs(aiScore - 0.5) * 2;
  return { aiScore, human, confidence, signals, detectedPhrases: phraseResult.phrases };
}

// --- Sample Texts ---

const SAMPLE_HUMAN = `You know what? I've been thinking about this for a while now. It's weird - sometimes the simplest things are the hardest to explain!\n\nLike yesterday, I tried explaining why the sky looks blue to my kid. She just stared at me. Didn't get it at all, haha. Kids, man.\n\nAnyway, what I'm trying to say is... don't overthink it. Just go with your gut. That's what I'd do.`;

const SAMPLE_AI = `As an AI language model, I cannot provide personal opinions. However, it's important to note that this topic has many facets. Furthermore, we should consider multiple perspectives. In conclusion, I hope this helps you understand the subject better. Feel free to ask if you have any more questions.`;

// --- DOM Interaction ---

const textarea = document.getElementById('playground-text');
const analyzeBtn = document.getElementById('analyze-btn');
const wordCountEl = document.getElementById('word-count');
const resultsPanel = document.getElementById('playground-results');
const placeholder = document.getElementById('playground-placeholder');

textarea.addEventListener('input', () => {
  const words = tokenize(textarea.value);
  const count = words.length;
  wordCountEl.textContent = count + ' word' + (count !== 1 ? 's' : '');
  analyzeBtn.disabled = count < 10;
});

document.querySelectorAll('.sample-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    textarea.value = btn.dataset.sample === 'human' ? SAMPLE_HUMAN : SAMPLE_AI;
    textarea.dispatchEvent(new Event('input'));
  });
});

analyzeBtn.addEventListener('click', () => {
  const text = textarea.value.trim();
  if (!text || analyzeBtn.disabled) return;
  analyzeBtn.classList.add('analyzing');
  const origText = analyzeBtn.textContent;
  analyzeBtn.textContent = 'Analyzing...';
  setTimeout(() => {
    const result = analyzeText(text);
    renderResults(result);
    analyzeBtn.classList.remove('analyzing');
    analyzeBtn.textContent = origText;
  }, 150);
});

function renderResults(result) {
  // Hide placeholder, show results
  if (placeholder) placeholder.style.display = 'none';
  resultsPanel.classList.add('visible');

  // Verdict
  const verdictText = document.getElementById('verdict-text');
  verdictText.className = 'verdict-text';
  if (result.aiScore < 0.4) {
    verdictText.textContent = 'Likely Human';
    verdictText.classList.add('human');
  } else if (result.aiScore > 0.6) {
    verdictText.textContent = 'Likely AI Generated';
    verdictText.classList.add('ai');
  } else {
    verdictText.textContent = 'Uncertain';
    verdictText.classList.add('uncertain');
  }

  // Confidence counter animation
  const confEl = document.getElementById('confidence-value');
  const targetConf = Math.round(result.confidence * 100);
  animateCounter(confEl, targetConf, '%');

  // Gauge
  const gaugeFill = document.getElementById('gauge-fill');
  const gaugeMarker = document.getElementById('gauge-marker');
  const pct = result.aiScore * 100;
  gaugeFill.className = 'gauge-fill';
  if (result.aiScore < 0.4) gaugeFill.classList.add('human');
  else if (result.aiScore > 0.6) gaugeFill.classList.add('ai');
  else gaugeFill.classList.add('uncertain');

  requestAnimationFrame(() => {
    gaugeFill.style.width = pct + '%';
    gaugeMarker.style.left = pct + '%';
  });

  // Signal breakdown
  const signalsList = document.getElementById('signals-list');
  signalsList.innerHTML = '';
  for (const [key, signal] of Object.entries(result.signals)) {
    const row = document.createElement('div');
    row.className = 'signal-row';
    const scorePct = Math.round(signal.score * 100);
    const colorClass = signal.score < 0.33 ? 'low' : signal.score < 0.66 ? 'mid' : 'high';
    row.innerHTML = `
      <span class="signal-name">${signal.label}</span>
      <div class="signal-bar"><div class="signal-fill ${colorClass}" style="width: 0%"></div></div>
      <span class="signal-value">${scorePct}%</span>
    `;
    signalsList.appendChild(row);
    // Animate the bar after a short delay
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        row.querySelector('.signal-fill').style.width = scorePct + '%';
      });
    });
  }

  // Detected phrases
  const phrasesCard = document.getElementById('phrases-card');
  const phrasesList = document.getElementById('phrases-list');
  if (result.detectedPhrases.length > 0) {
    phrasesCard.style.display = 'block';
    phrasesList.innerHTML = '';
    for (const phrase of result.detectedPhrases) {
      const tag = document.createElement('span');
      tag.className = 'phrase-tag';
      tag.textContent = phrase;
      phrasesList.appendChild(tag);
    }
  } else {
    phrasesCard.style.display = 'none';
  }
}

function animateCounter(el, target, suffix) {
  const duration = 600;
  const start = performance.now();
  const animate = (now) => {
    const elapsed = now - start;
    const progress = Math.min(elapsed / duration, 1);
    const eased = 1 - Math.pow(1 - progress, 3);
    el.textContent = Math.round(target * eased) + suffix;
    if (progress < 1) requestAnimationFrame(animate);
  };
  el.textContent = '0' + suffix;
  requestAnimationFrame(animate);
}

// ==========================================================================
// Scroll Animations
// ==========================================================================

const animatedSections = document.querySelectorAll(
  '.playground, .stats, .benchmark, .collage, .comparison, .features, .use-cases, .cta'
);

const staggerContainers = {
  '.stats-grid': '.stat-item',
  '.features-grid': '.feature-card',
  '.use-cases-grid': '.use-case-card',
};

animatedSections.forEach(section => {
  section.classList.add('fade-in-up');
});

Object.entries(staggerContainers).forEach(([parentSel, childSel]) => {
  const parent = document.querySelector(parentSel);
  if (!parent) return;
  parent.querySelectorAll(childSel).forEach((child, i) => {
    child.classList.add('fade-in-up');
    child.style.setProperty('--delay', (i * 0.1) + 's');
  });
});

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.15, rootMargin: '0px 0px -50px 0px' });

document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));

// Counter animations for stat values
const statValues = document.querySelectorAll('.stat-value');
const counterObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    const el = entry.target;
    const text = el.textContent;
    const match = text.match(/^(\d+)/);
    if (!match) return;
    const target = parseInt(match[1]);
    if (target === 0) { counterObserver.unobserve(el); return; }
    const suffix = text.replace(/^\d+/, '');
    const duration = 1200;
    const start = performance.now();
    const animate = (now) => {
      const elapsed = now - start;
      const progress = Math.min(elapsed / duration, 1);
      const eased = 1 - Math.pow(1 - progress, 3);
      el.textContent = Math.round(target * eased) + suffix;
      if (progress < 1) requestAnimationFrame(animate);
    };
    el.textContent = '0' + suffix;
    requestAnimationFrame(animate);
    counterObserver.unobserve(el);
  });
}, { threshold: 0.5 });

statValues.forEach(el => counterObserver.observe(el));
</script>

</body>
</html>
